{"ast":null,"code":"var _jsxFileName = \"D:\\\\polytech_nice_sophia\\\\SI5\\\\Programmable-web\\\\Projet\\\\BJT\\\\client-side\\\\src\\\\Components\\\\login\\\\login.js\";\nimport React, { Component } from \"react\";\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport Bootstrap from \"react-bootstrap\";\nimport { Redirect } from \"react-router-dom\";\nimport \"./login.css\";\nimport axios from 'axios'; // const token = localStorage.getItem(\"token\")\n// var passwordHash = require('password-hash');\n\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    /*let loggedIn=true\r\n    if(token==null){\r\n      loggedIn=false\r\n    }*/\n\n    this.signupForm = event => {\n      window.location.href = '/signup/';\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.id]: event.target.value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault(); //const email = this.state.email\n      //const password = passwordHash.generate(this.state.password)\n\n      /*console.log(this.state.email,passwordHash.generate(this.state.password));*/\n\n      /*try {\r\n        \r\n        localStorage.setItem(\"token\", token)\r\n        this.setState({\r\n            loggedIn: true\r\n        })\r\n      } catch (err) {\r\n        this.setState({\r\n            error: err.message\r\n        })\r\n      }*/\n\n      this.UserAuthentifiaction({\n        email: this.state.email,\n        password: this.state.password\n      });\n    };\n\n    this.state = {\n      email: \"\",\n      password: \"\",\n      loggedIn: false,\n      redirect: false\n    };\n  }\n\n  validateForm() {\n    return this.state.email.length > 0 && this.state.password.length > 0;\n  }\n\n  UserAuthentifiaction(data) {\n    axios.post(\"http://localhost:3001/auth\", data).then(res => {\n      if (res.status === 200) {\n        this.setState({\n          loggedIn: true\n        });\n        this.props.history.push('/accueil');\n      } else {\n        const error = new Error(res.error);\n        throw error;\n      }\n    }).catch(err => {\n      console.error(err);\n      alert('Error logging in please try again');\n    });\n  }\n\n  render() {\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"Login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"Connexion\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Connexion\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"email\",\n      bsSize: \"large\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      autoFocus: true,\n      type: \"email\",\n      value: this.state.email,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"password\",\n      bsSize: \"large\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      value: this.state.password,\n      onChange: this.handleChange,\n      type: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    })), React.createElement(Button, {\n      block: true,\n      bsSize: \"large\",\n      disabled: !this.validateForm(),\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Login\"), React.createElement(Button, {\n      block: true,\n      bsSize: \"large\",\n      onClick: this.signupForm,\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Signup\"))));\n  }\n\n}","map":{"version":3,"sources":["D:/polytech_nice_sophia/SI5/Programmable-web/Projet/BJT/client-side/src/Components/login/login.js"],"names":["React","Component","Form","Button","Bootstrap","Redirect","axios","Login","constructor","props","signupForm","event","window","location","href","handleChange","setState","target","id","value","handleSubmit","preventDefault","UserAuthentifiaction","email","state","password","loggedIn","redirect","validateForm","length","data","post","then","res","status","history","push","error","Error","catch","err","console","alert","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACI,OAAOC,IAAP,MAAiB,sBAAjB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,SAAQC,QAAR,QAAuB,kBAAvB;AACA,OAAO,aAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CACD;AACA;;AACC,eAAe,MAAMC,KAAN,SAAoBN,SAApB,CAA8B;AAC3CO,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AAEA;;;;;AAHiB,SAmBnBC,UAnBmB,GAmBNC,KAAK,IAAI;AAAEC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,UAArB;AACvB,KApBkB;;AAAA,SAqBnBC,YArBmB,GAqBJJ,KAAK,IAAI;AACtB,WAAKK,QAAL,CAAc;AACZ,SAACL,KAAK,CAACM,MAAN,CAAaC,EAAd,GAAmBP,KAAK,CAACM,MAAN,CAAaE;AADpB,OAAd;AAGD,KAzBkB;;AAAA,SA2BnBC,YA3BmB,GA2BJT,KAAK,IAAI;AACtBA,MAAAA,KAAK,CAACU,cAAN,GADsB,CAEtB;AACA;;AACA;;AACA;;;;;;;;;;;;AAYA,WAAKC,oBAAL,CAA0B;AAACC,QAAAA,KAAK,EAAC,KAAKC,KAAL,CAAWD,KAAlB;AAAwBE,QAAAA,QAAQ,EAAC,KAAKD,KAAL,CAAWC;AAA5C,OAA1B;AACL,KA7CsB;;AAOjB,SAAKD,KAAL,GAAa;AACXD,MAAAA,KAAK,EAAE,EADI;AAEXE,MAAAA,QAAQ,EAAE,EAFC;AAGXC,MAAAA,QAAQ,EAAC,KAHE;AAIXC,MAAAA,QAAQ,EAAE;AAJC,KAAb;AAMD;;AAEDC,EAAAA,YAAY,GAAG;AACb,WAAO,KAAKJ,KAAL,CAAWD,KAAX,CAAiBM,MAAjB,GAA0B,CAA1B,IAA+B,KAAKL,KAAL,CAAWC,QAAX,CAAoBI,MAApB,GAA6B,CAAnE;AACD;;AA8BLP,EAAAA,oBAAoB,CAACQ,IAAD,EAAO;AAEzBxB,IAAAA,KAAK,CAACyB,IAAN,CAAW,4BAAX,EAAwCD,IAAxC,EACCE,IADD,CACMC,GAAG,IAAI;AACX,UAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtB,aAAKlB,QAAL,CAAc;AAAEU,UAAAA,QAAQ,EAAE;AAAZ,SAAd;AACA,aAAKjB,KAAL,CAAW0B,OAAX,CAAmBC,IAAnB,CAAwB,UAAxB;AACD,OAHD,MAGO;AACL,cAAMC,KAAK,GAAG,IAAIC,KAAJ,CAAUL,GAAG,CAACI,KAAd,CAAd;AACA,cAAMA,KAAN;AACD;AACF,KATD,EAUCE,KAVD,CAUOC,GAAG,IAAI;AACZC,MAAAA,OAAO,CAACJ,KAAR,CAAcG,GAAd;AACAE,MAAAA,KAAK,CAAC,mCAAD,CAAL;AACD,KAbD;AAcD;;AAEGC,EAAAA,MAAM,GAAG;AAEP,WAEE,0CAEA;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACV;AAAI,MAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADU,EAC8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAD9B,EAEE,oBAAC,IAAD;AAAM,MAAA,QAAQ,EAAE,KAAKvB,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,SAAS,EAAC,OAAtB;AAA8B,MAAA,MAAM,EAAC,OAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD,CAAM,OAAN;AACE,MAAA,SAAS,MADX;AAEE,MAAA,IAAI,EAAC,OAFP;AAGE,MAAA,KAAK,EAAE,KAAKI,KAAL,CAAWD,KAHpB;AAIE,MAAA,QAAQ,EAAE,KAAKR,YAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,EASE,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,SAAS,EAAC,UAAtB;AAAiC,MAAA,MAAM,EAAC,OAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD,CAAM,OAAN;AACE,MAAA,KAAK,EAAG,KAAKS,KAAL,CAAWC,QADrB;AAEE,MAAA,QAAQ,EAAE,KAAKV,YAFjB;AAGE,MAAA,IAAI,EAAC,UAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CATF,EAgBE,oBAAC,MAAD;AACE,MAAA,KAAK,MADP;AAEE,MAAA,MAAM,EAAC,OAFT;AAGE,MAAA,QAAQ,EAAE,CAAC,KAAKa,YAAL,EAHb;AAIE,MAAA,IAAI,EAAC,QAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAhBF,EAwBE,oBAAC,MAAD;AACE,MAAA,KAAK,MADP;AAEE,MAAA,MAAM,EAAC,OAFT;AAGE,MAAA,OAAO,EAAE,KAAKlB,UAHhB;AAIE,MAAA,IAAI,EAAC,QAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAxBF,CAFF,CAFA,CAFF;AA2CA;;AA/GyC","sourcesContent":["import React, { Component } from \"react\";\r\n    import Form from 'react-bootstrap/Form'\r\n    import Button from 'react-bootstrap/Button'\r\n    import Bootstrap from \"react-bootstrap\";\r\n    import {Redirect} from \"react-router-dom\"\r\n    import \"./login.css\";\r\n    import axios from 'axios'\r\n   // const token = localStorage.getItem(\"token\")\r\n   // var passwordHash = require('password-hash');\r\n    export default class Login extends Component {\r\n      constructor(props) {\r\n        super(props);\r\n        \r\n        /*let loggedIn=true\r\n        if(token==null){\r\n          loggedIn=false\r\n        }*/\r\n        this.state = {\r\n          email: \"\",\r\n          password: \"\",\r\n          loggedIn:false,\r\n          redirect: false\r\n        };\r\n      }\r\n\r\n      validateForm() {\r\n        return this.state.email.length > 0 && this.state.password.length > 0;\r\n      }\r\n      \r\n      signupForm = event => { window.location.href='/signup/'\r\n      }\r\n      handleChange = event => {\r\n        this.setState({\r\n          [event.target.id]: event.target.value\r\n        });\r\n      }\r\n\r\n      handleSubmit = event => {\r\n        event.preventDefault();\r\n        //const email = this.state.email\r\n        //const password = passwordHash.generate(this.state.password)\r\n        /*console.log(this.state.email,passwordHash.generate(this.state.password));*/\r\n        /*try {\r\n          \r\n          localStorage.setItem(\"token\", token)\r\n          this.setState({\r\n              loggedIn: true\r\n          })\r\n      } catch (err) {\r\n          this.setState({\r\n              error: err.message\r\n          })\r\n      }*/\r\n\r\n        this.UserAuthentifiaction({email:this.state.email,password:this.state.password})\r\n  }  \r\n     \r\n  UserAuthentifiaction(data) {\r\n\r\n    axios.post(\"http://localhost:3001/auth\",data)\r\n    .then(res => {\r\n      if (res.status === 200) {\r\n        this.setState({ loggedIn: true });\r\n        this.props.history.push('/accueil');\r\n      } else {\r\n        const error = new Error(res.error);\r\n        throw error;\r\n      }\r\n    })\r\n    .catch(err => {\r\n      console.error(err);\r\n      alert('Error logging in please try again');\r\n    });\r\n  }\r\n      \r\n      render() { \r\n        \r\n        return (\r\n\r\n          <>\r\n\r\n          <div className=\"Login\" >\r\n<h2 className=\"Connexion\">Connexion</h2><br></br>\r\n            <Form onSubmit={this.handleSubmit}>\r\n              <Form.Group controlId=\"email\" bsSize=\"large\">\r\n                <Form.Control\r\n                  autoFocus\r\n                  type=\"email\"\r\n                  value={this.state.email}\r\n                  onChange={this.handleChange}\r\n                />\r\n              </Form.Group>\r\n              <Form.Group controlId=\"password\" bsSize=\"large\">\r\n                <Form.Control\r\n                  value={(this.state.password)}\r\n                  onChange={this.handleChange}\r\n                  type=\"password\"\r\n                />\r\n              </Form.Group>\r\n              <Button\r\n                block\r\n                bsSize=\"large\"\r\n                disabled={!this.validateForm()}\r\n                type=\"submit\"\r\n              >\r\n                Login\r\n              </Button>\r\n              <Button\r\n                block\r\n                bsSize=\"large\"\r\n                onClick={this.signupForm }\r\n                type=\"submit\"\r\n              >\r\n                Signup\r\n              </Button>\r\n            </Form>\r\n          </div>\r\n\r\n          </>\r\n        );\r\n       }\r\n \r\n        \r\n      \r\n    }\r\n\r\n"]},"metadata":{},"sourceType":"module"}