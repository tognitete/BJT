{"ast":null,"code":"var _jsxFileName = \"D:\\\\polytech_nice_sophia\\\\SI5\\\\Programmable-web\\\\Projet\\\\BJT\\\\client-side\\\\src\\\\Components\\\\formulaire\\\\formulaire.js\";\nimport React, { Component } from 'react';\nimport './formulaire.css';\nimport ImageUploader from 'react-images-upload';\nimport axios from 'axios';\nconst endpoint = 'http://localhost:3001/plugin';\n\nclass Form extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleUsernameChange = event => {\n      this.setState({\n        nom: event.target.value\n      });\n    };\n\n    this.handleVersionChange = event => {\n      this.setState({\n        version: event.target.value\n      });\n    };\n\n    this.handleCommentsChange = event => {\n      this.setState({\n        description: event.target.value\n      });\n    };\n\n    this.handleTagChange = event => {\n      this.setState({\n        tag: event.target.value\n      });\n    };\n\n    this.handleTutorielChange = event => {\n      this.setState({\n        tutoriel: event.target.value\n      });\n    };\n\n    this.handleTopicChange = event => {\n      this.setState({\n        topic: event.target.value\n      });\n    };\n\n    this.handleSubmit = event => {\n      console.log(this.state);\n      event.preventDefault();\n      console.log(this.state);\n      this.checkPluginExists();\n      const data = new FormData();\n\n      for (var key in this.state) {\n        data.append(key, this.state[key]);\n      }\n\n      this.sendPluginData(data); //window.location.href='/affichagePlugins'\n    };\n\n    this.handleselectedFile = event => {\n      this.setState({\n        selectedFile: event.target.files[0],\n        loaded: 0\n      });\n    };\n\n    this.handleUpload = () => {\n      const data = new FormData();\n      data.append('file', this.state.selectedFile, this.state.selectedFile.name);\n      axios.post(endpoint, data, {\n        onUploadProgress: ProgressEvent => {\n          this.setState({\n            loaded: ProgressEvent.loaded / ProgressEvent.total * 100\n          });\n        }\n      }).then(res => {\n        console.log(res.statusText);\n      });\n    };\n\n    this.handleLienChange = event => {\n      this.setState({\n        lien: event.target.value\n      });\n    };\n\n    this.state = {\n      nom: '',\n      version: '',\n      description: '',\n      pictures: null,\n      opensource: false,\n      topic: '',\n      tag: '',\n      tutoriel: '',\n      lien: '',\n      errors: {},\n      invalid: false,\n      fichier: null,\n      loaded: 0\n    };\n    this.onDrop = this.onDrop.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleRadioChange = this.handleRadioChange.bind(this);\n    this.handleFichier = this.handleFichier.bind(this);\n  }\n\n  onDrop(picture) {\n    this.setState({\n      pictures: picture[0]\n    });\n  }\n\n  sendPluginData(data) {\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    axios.post(\"http://localhost:3001/plugin\", data, config).then(response => {\n      console.log(response);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n  /*sendPluginData(data) { \r\n         const headers = { 'content-type': 'multipart/form-data' }\r\n         \r\n         fetch(\"http://localhost:3001/plugin\", {\r\n             method: \"post\",\r\n             headers: headers,\r\n             body: JSON.stringify(data)\r\n           })\r\n             .then(res => res.json())\r\n             .then(res => {\r\n               if (res.error) {\r\n                 this.setState({ loading: false, error: res.error });\r\n               } else {\r\n               }\r\n             })\r\n     \r\n      \r\n  \t}*/\n\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.type === 'radio' ? target.checked : target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleRadioChange(changeEvent) {\n    this.setState({\n      opensource: changeEvent.target.value\n    });\n  }\n\n  handleFichier(event) {\n    this.setState({\n      fichier: event.target.value\n    });\n  }\n\n  checkPluginExists() {\n    axios.get(\"http://localhost:3001/plugin/\" + this.state.nom).then(response => {\n      console.log(response);\n\n      if (response.length > 0) {\n        alert(\"Ce plugin existe deja\");\n      }\n    });\n  }\n\n  render() {\n    const _this$state = this.state,\n          Nom = _this$state.Nom,\n          Version = _this$state.Version,\n          description = _this$state.description,\n          topic = _this$state.topic,\n          Tag = _this$state.Tag,\n          Tutoriel = _this$state.Tutoriel,\n          lien = _this$state.lien;\n    return React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Nom_plugin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \" Nom du plugin \"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.nom,\n      onChange: this.handleUsernameChange,\n      isRequired: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, \"Version \"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.version,\n      onChange: this.handleVersionChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, \"Description\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      value: this.state.description,\n      onChange: this.handleCommentsChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(ImageUploader, {\n      withIcon: true,\n      buttonText: \"Choose images\",\n      onChange: this.onDrop,\n      imgExtension: ['.jpg', '.gif', '.png', '.gif'],\n      maxFileSize: 5242880,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, \"Le logiciel est open source:\", React.createElement(\"div\", {\n      className: \"radio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"rb1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      name: \"opensource\",\n      type: \"radio\",\n      checked: this.state.opensource,\n      onChange: this.handleRadioChange,\n      value: \"oui\",\n      checked: this.state.opensource === 'oui',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }), \" Oui\"), React.createElement(\"input\", {\n      name: \"opensource\",\n      type: \"radio\",\n      checked: this.state.opensource,\n      onChange: this.handleRadioChange,\n      value: \"non\",\n      checked: this.state.opensource === 'non',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }), \" Non\"))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, \"Topic\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      value: this.state.topic,\n      onChange: this.handleTopicChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"modulation\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }, \"Modultion\"), React.createElement(\"option\", {\n      value: \"distorsion\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, \"Distorsion\"), React.createElement(\"option\", {\n      value: \"egalisation\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, \"Egalisation\"), React.createElement(\"option\", {\n      value: \"reverb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, \"reverb\"), React.createElement(\"option\", {\n      value: \"accordeur\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }, \"accordeur\")))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, \"Tag \"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.tag,\n      onChange: this.handleTagChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, \"Tutoriel \"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.tutoriel,\n      onChange: this.handleTutorielChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, \"Lien vers le plugin\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"url\",\n      value: this.state.lien,\n      onChange: this.handleLienChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"Upload\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      name: \"\",\n      id: \"\",\n      onChange: this.handleselectedFile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.handleUpload,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }, \"Upload\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }, \" \", Math.round(this.state.loaded, 2), \" %\")), React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }, \"Soumettre2\"));\n  }\n\n}\n\nexport default Form;","map":{"version":3,"sources":["D:/polytech_nice_sophia/SI5/Programmable-web/Projet/BJT/client-side/src/Components/formulaire/formulaire.js"],"names":["React","Component","ImageUploader","axios","endpoint","Form","constructor","props","handleUsernameChange","event","setState","nom","target","value","handleVersionChange","version","handleCommentsChange","description","handleTagChange","tag","handleTutorielChange","tutoriel","handleTopicChange","topic","handleSubmit","console","log","state","preventDefault","checkPluginExists","data","FormData","key","append","sendPluginData","handleselectedFile","selectedFile","files","loaded","handleUpload","name","post","onUploadProgress","ProgressEvent","total","then","res","statusText","handleLienChange","lien","pictures","opensource","errors","invalid","fichier","onDrop","bind","handleInputChange","handleRadioChange","handleFichier","picture","config","headers","response","catch","error","type","checked","changeEvent","get","length","alert","render","Nom","Version","Tag","Tutoriel","Math","round"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport './formulaire.css'\r\nimport ImageUploader from 'react-images-upload'\r\nimport axios from 'axios'\r\n\r\nconst endpoint = 'http://localhost:3001/plugin'\r\n\r\nclass Form extends Component {\r\n\tconstructor(props) {\r\n\r\n\t\t\r\n\r\n\t\tsuper(props)\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tnom: '',\r\n\t\t\tversion: '',\r\n            description: '',\r\n\t\t\tpictures: null,\r\n\t\t    opensource: false,\r\n\t\t    topic: '',\r\n\t\t    tag: '',\r\n\t\t\ttutoriel: '',\r\n\t\t\tlien:'',\r\n\t\t\terrors: {},\r\n\t\t\tinvalid: false,\r\n\t\t\tfichier: null,\r\n\t\t\tloaded : 0\r\n\t\t}\r\n\t\tthis.onDrop =  this.onDrop.bind(this);\r\n\t\tthis.handleInputChange = this.handleInputChange.bind(this);\r\n\t\tthis.handleRadioChange = this.handleRadioChange.bind(this);\r\n\t\tthis.handleFichier=this.handleFichier.bind(this);\r\n\r\n\r\n\r\n\t}\r\n\r\n\tonDrop(picture) {\r\n        this.setState({\r\n            pictures: picture[0],\r\n        });\r\n    }\r\n \r\n\r\n\thandleUsernameChange = event => {\r\n\t\tthis.setState({\r\n\t\t\tnom: event.target.value\r\n\t\t\t\r\n\t\t}) \r\n\t}\r\n\thandleVersionChange = event => {\r\n\t\tthis.setState({\r\n\t\t\tversion: event.target.value\r\n\t\t\t\r\n\t\t}) \r\n\t}\r\n\thandleCommentsChange = event => {\r\n\t\tthis.setState({\r\n\t\t\tdescription: event.target.value\r\n\t\t})\r\n\t}\r\n\thandleTagChange = event => {\r\n\t\tthis.setState({\r\n\t\t\ttag: event.target.value\r\n\t\t\t\r\n\t\t}) \r\n\t}\r\n\thandleTutorielChange = event => {\r\n\t\tthis.setState({\r\n\t\t\ttutoriel: event.target.value\r\n\t\t\t\r\n\t\t}) \r\n\t}\r\n\r\n\t\r\n\thandleTopicChange = event => {\r\n\t\tthis.setState({\r\n\t\t\ttopic: event.target.value\r\n\t\t})\r\n\t}\r\n\r\n\thandleSubmit = event => {\r\n\t\tconsole.log(this.state);\r\n\t\tevent.preventDefault()\r\n\t\tconsole.log(this.state);\r\n\r\n\t\tthis.checkPluginExists()\r\n\t\tconst data = new FormData() \r\n\r\n\t\tfor ( var key in this.state ) {\r\n\t\t\tdata.append(key, this.state[key]);\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\t\r\n\t\tthis.sendPluginData(data)\r\n\t\t//window.location.href='/affichagePlugins'\r\n\t}\r\n\t\r\n\tsendPluginData(data) {\t\r\n\t\tconst config = {     \r\n\t\t\theaders: { 'content-type': 'multipart/form-data' }\r\n\t\t}\r\n\t\taxios.post(\"http://localhost:3001/plugin\",data,config)\r\n\t\t    .then(response => {\r\n\t\t\tconsole.log(response)\r\n\t\t}).catch(error => {\r\n\r\n            console.log(error)\r\n\t\t});\r\n\t}\r\n\r\n\t/*sendPluginData(data) { \r\n        const headers = { 'content-type': 'multipart/form-data' }\r\n        \r\n        fetch(\"http://localhost:3001/plugin\", {\r\n            method: \"post\",\r\n            headers: headers,\r\n            body: JSON.stringify(data)\r\n          })\r\n            .then(res => res.json())\r\n            .then(res => {\r\n              if (res.error) {\r\n                this.setState({ loading: false, error: res.error });\r\n              } else {\r\n              }\r\n            })\r\n    \r\n     \r\n\t\t}*/\r\n\t\t\r\n\t\thandleselectedFile = event => {\r\n\t\t\tthis.setState({\r\n\t\t\t  selectedFile: event.target.files[0],\r\n\t\t\t  loaded: 0,\r\n\t\t\t})\r\n\t\t  }\r\n\t\t  \r\n\t\thandleUpload = () => {\r\n\t\tconst data = new FormData()\r\n\t\tdata.append('file', this.state.selectedFile, this.state.selectedFile.name)\r\n\t\taxios.post(endpoint, data, {\r\n\t\t\tonUploadProgress: ProgressEvent => {\r\n\t\t\t  this.setState({\r\n\t\t\t\tloaded: (ProgressEvent.loaded / ProgressEvent.total*100),\r\n\t\t\t  })\r\n\t\t\t},\r\n\t\t  })\r\n\t\t  .then(res => {\r\n\t\t\tconsole.log(res.statusText)\r\n\t\t  })\r\n\t  }\r\n\r\n    handleInputChange(event) {\r\n\t\t\r\n        const target = event.target;\r\n        const value = target.type === 'radio' ? target.checked : target.value;\r\n        const name = target.name;\r\n    \r\n        this.setState({\r\n          [name]: value\r\n        });\r\n\t  }\r\n\t  handleRadioChange(changeEvent) {\r\n\t\tthis.setState({\r\n\t\t  opensource: changeEvent.target.value\r\n\t\t});\r\n\t  }\r\n\t  handleLienChange = event => {\r\n\t\tthis.setState({\r\n\t\t\tlien: event.target.value\r\n\t\t\t\r\n\t\t}) \r\n\t}\r\n\r\n\thandleFichier(event) {\r\n\t\tthis.setState({\r\n\t\t  fichier: event.target.value\r\n\t\t})\r\n\t  }\r\n\r\n\r\n  checkPluginExists() {\r\n\t  \r\n    axios.get(\"http://localhost:3001/plugin/\"+this.state.nom)\r\n    .then(response => {\r\n    console.log(response);\r\n        if (response.length>0){\r\n\t\t\talert(\"Ce plugin existe deja\")\r\n\t\t}\r\n\r\n\t\t\t\r\n\t\t    \r\n\r\n  })\r\n}\r\n  \r\n \r\n\trender() {\r\n\t\tconst { Nom, Version, description, topic, Tag, Tutoriel, lien } = this.state\r\n\t\treturn (\r\n\t\t\t<form onSubmit={this.handleSubmit}>\r\n\t\t\t\t<div className=\"Nom_plugin\">\r\n\t\t\t\t\t\r\n\t\t\t\t\t<label> Nom du plugin </label>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tvalue={this.state.nom}\r\n\t\t\t\t\t\tonChange={this.handleUsernameChange}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tisRequired/>\r\n\t\t\t\t</div></div>\r\n                <div>\r\n\t\t\t\t\t<label>Version </label>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tvalue={this.state.version}\r\n\t\t\t\t\t\tonChange={this.handleVersionChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div></div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label>Description</label>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\tvalue={this.state.description}\r\n\t\t\t\t\t\tonChange={this.handleCommentsChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div></div>\r\n                 <div>\r\n\t\t\t\t <ImageUploader\r\n                withIcon={true}\r\n                buttonText='Choose images'\r\n                onChange={this.onDrop}\r\n                imgExtension={['.jpg', '.gif', '.png', '.gif']}\r\n                maxFileSize={5242880}\r\n            />\r\n\t\t\t\t </div>\r\n                <div >\r\n                <label>\r\n                Le logiciel est open source:\r\n\t\t\t\t\r\n\t\t\t\t<div className=\"radio\" >\r\n\t\t\t\t\t<div className=\"rb1\">\r\n\t\t     <input \r\n\r\n              name=\"opensource\"\r\n              type=\"radio\"\r\n              checked={this.state.opensource}\r\n\t\t\t  onChange={this.handleRadioChange} \r\n\t\t\t  value = \"oui\"\r\n\t\t\t  checked={this.state.opensource === 'oui'}/> Oui</div>\r\n\r\n             <input\r\n\t\t\t \r\n              name=\"opensource\"\r\n              type=\"radio\"\r\n              checked={this.state.opensource}\r\n\t\t\t  onChange={this.handleRadioChange} \r\n\t\t\t  value = \"non\"\r\n\t\t\t  checked={this.state.opensource === 'non'}/> Non\r\n\t\t\t  </div>\r\n          </label></div>\r\n\r\n\t\t\t\t<div>\r\n                <label>Topic</label>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<select value={this.state.topic} onChange={this.handleTopicChange}>\r\n\t\t\t\t\t    <option value=\"\"></option>\r\n\t\t\t\t\t\t<option value=\"modulation\">Modultion</option>\r\n\t\t\t\t\t\t<option value=\"distorsion\">Distorsion</option>\r\n\t\t\t\t\t\t<option value=\"egalisation\">Egalisation</option>\r\n                        <option value=\"reverb\">reverb</option>\r\n                        <option value=\"accordeur\">accordeur</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div></div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label>Tag </label>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tvalue={this.state.tag}\r\n\t\t\t\t\t\tonChange={this.handleTagChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div></div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\r\n\t\t\t\t\t<label>Tutoriel </label>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tvalue={this.state.tutoriel}\r\n\t\t\t\t\t\tonChange={this.handleTutorielChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div></div>\r\n                <div>\r\n\t\t\t\t\t<label>Lien vers le plugin</label>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"url\"\r\n\t\t\t\t\t\tvalue={this.state.lien}\r\n\t\t\t\t\t\tonChange={this.handleLienChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div></div>\r\n\t\t\t  <div className=\"Upload\">\r\n        <input type=\"file\" name=\"\" id=\"\" onChange={this.handleselectedFile} />\r\n        <button onClick={this.handleUpload}>Upload</button>\r\n        <div> {Math.round(this.state.loaded,2) } %</div>\r\n          </div>\r\n        \r\n        \r\n\t\t\t\t<button type=\"submit\">Soumettre2</button>\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t</form>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Form;\r\n\r\n"]},"metadata":{},"sourceType":"module"}